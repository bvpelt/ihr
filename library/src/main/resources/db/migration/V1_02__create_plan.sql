-- table plan
create table plan
(
    id                         bigint not null primary key,
    identificatie              text   not null,
    plantype                   text   not null,
    beleidsmatigeoverheid_id   bigint,
    publicerendeoverheid_id    bigint,
    naam                       text,
    planstatus_id              bigint,
    verwijzingnaarvaststelling text,
    verwijzingnaargml          text,
    besluitnummer              text,
    regelstatus                text,
    dossierid                  text,
    dossierstatus              text,
    isparapluplan              boolean,
    beroepenbezwaar            text,
    ishistorisch               boolean,
    verwijderdop               timestamp,
    istamplan                  boolean,
    einderechtsgeldigheid      date,
    md5hash                    text   not null,
    bboxmd5hash                text   not null
);

create unique index plan_identificatie_idx on plan (identificatie);

create index plan_naam_idx on plan (naam);

create index plan_dossier_idx on plan (dossierid);

create index plan_besluitnummer_idx on plan (besluitnummer);

create index plan_md5hash_idx on plan (md5hash);

create index plan_bboxd5hash_idx on plan (bboxmd5hash);

ALTER TABLE plan
    OWNER TO testuser;

ALTER TABLE plan
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME plan_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );

-- table plan_locatienaam
create table plan_locatienaam
(
    id             bigint not null primary key,
    plan_id        bigint,
    locatienaam_id bigint
);

create index plan_locatienaam_plan_idx on plan_locatienaam (plan_id);
create index plan_locatienaam_locatienaam_idx on plan_locatienaam (locatienaam_id);

ALTER TABLE plan_locatienaam
    OWNER TO testuser;

ALTER TABLE plan_locatienaam
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME plan_locatienaam_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );

-- table planstatus
create table planstatus
(
    id     bigint not null primary key,
    status text,
    datum  date

);

create index planstatus_status_idx on planstatus (status);

ALTER TABLE planstatus
    OWNER TO testuser;

ALTER TABLE planstatus
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME planstatus_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );

-- table plan_verwijzingnorm
create table plan_verwijzingnorm
(
    id                bigint not null primary key,
    plan_id           bigint,
    verwijzingnorm_id bigint
);

create index plan_verwijzingnorm_plan_idx on plan_verwijzingnorm (plan_id);
create index plan_verwijzingnorm_verwijzingnorm_idx on plan_verwijzingnorm (verwijzingnorm_id);

ALTER TABLE plan_verwijzingnorm
    OWNER TO testuser;

ALTER TABLE plan_verwijzingnorm
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME plan_verwijzingnorm_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );

-- table plan_normadressant
create table plan_normadressant
(
    id               bigint not null primary key,
    plan_id          bigint,
    normadressant_id bigint
);

create index plan_normadressant_plan_idx on plan_normadressant (plan_id);
create index plan_normadressant_norm_idx on plan_normadressant (normadressant_id);

ALTER TABLE plan_normadressant
    OWNER TO testuser;

ALTER TABLE plan_normadressant
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME plan_normadressant_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );

-- table plan_ondergrond
create table plan_ondergrond
(
    id            bigint not null primary key,
    plan_id       bigint,
    ondergrond_id bigint
);

create index plan_ondergrond_plan_idx on plan_ondergrond (plan_id);
create index plan_ondergrond_ondergrond_idx on plan_ondergrond (ondergrond_id);

ALTER TABLE plan_ondergrond
    OWNER TO testuser;

ALTER TABLE plan_ondergrond
    ALTER
        COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME plan_ondergrond_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
        );
